<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kitap Tavsiye App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f0f0;
        }

        #container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 25px;
        }

        .profile-image {
            width: 100px;
            height: 140px;
            border-radius: 1%;
            cursor: pointer;
            transition: transform 0.3s ease-in-out;
        }
        
        .profile-item.selected {
            filter: brightness(25%);
        }

        .profile-image:hover {
            transform: scale(1.3);
        }

        #celebrationModal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
        }

        #celebrationModalContent {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 400px;
            text-align: center;
            border-radius: 10px;
        }

        #celebrationModalClose {
            color: #aaaaaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        #celebrationModalClose:hover,
        #celebrationModalClose:focus {
            color: #000;
            text-decoration: none;
        }

        #celebrationMessage {
            font-size: 18px;
            color: green;
            margin-bottom: 20px;
        }

        #matchedListContainer {
            margin-top: 20px;
            font-size: 16px;
            text-align: left;
            display: none;
        }

        #matchedList {
            margin-top: 10px;
        }

        #showMatchedListButton {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
            outline: none;
            display: none; /* Initially hidden */
        }

        #showMatchedListButton:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <div id="container"></div>

    <div id="celebrationModal">
        <div id="celebrationModalContent">
            <span id="celebrationModalClose" onclick="closeCelebrationModal()">&times;</span>
            <p id="celebrationMessage"></p>
        </div>
    </div>

    <div id="matchedListContainer">
        <h2>Eşleşmeler</h2>
        <ul id="matchedList"></ul>
    </div>
    <button id="showMatchedListButton" onclick="showMatchedList()">Tüm Eşleşmeleri Göster</button>

    <script>
        
        var AProfiles = [
            { name: "İzmir'in seyir defteri", imageUrl: "https://m.media-amazon.com/images/I/41zxftmJcAL._SY445_SX342_.jpg"},
            { name: "Yarım Yüzyıldan Şiirler", imageUrl: "https://i.dr.com.tr/cache/500x400-0/originals/0000000629153-1.jpg"},
            { name: "Üç Başlı Ejderha", imageUrl: "https://i.dr.com.tr/cache/500x400-0/originals/0001960652002-1.jpg"},
            { name: "Yaban", imageUrl: "https://i.dr.com.tr/cache/500x400-0/originals/0002087592001-1.jpg"},
            { name: "Yirminci Yüzyıl Ağıtları", imageUrl: "https://www.fidankitap.com/u/fidankitap/img/c/y/i/yirminci-yuzyil-agitlari9a4becc3a0da894cb7b89c584d0dadec.jpg"},
            { name: "Kuyucaklı Yusuf", imageUrl: "https://i.dr.com.tr/cache/500x400-0/originals/0001854957001-1.jpg"},
            { name: "Dedem ve Oğulları", imageUrl: "https://i.dr.com.tr/cache/500x400-0/originals/0001994714001-1.jpg"},
            { name: "Vapur Hikayeleri", imageUrl: "https://productimages.hepsiburada.net/s/165/1500/110000126740017.jpg"},
            { name: "Havada Bulut", imageUrl: "https://i.dr.com.tr/cache/500x400-0/originals/0001957183001-1.jpg"},
            { name: "Sarnıç", imageUrl: "https://i.dr.com.tr/cache/500x400-0/originals/0001960654001-1.jpg"},
            { name: "Mahkeme Kapısı", imageUrl: "https://i.dr.com.tr/cache/500x400-0/originals/0001948355002-1.jpg"},
            { name: "Şahmerdan", imageUrl: "https://i.dr.com.tr/cache/500x400-0/originals/0001958678001-1.jpg"},
        ];

        var BProfiles = [
            
        { name: "1", imageUrl: "https://via.placeholder.com/150?text=1" },
        { name: "2", imageUrl: "https://via.placeholder.com/150?text=2" },
        { name: "3", imageUrl: "https://via.placeholder.com/150?text=3" },
        { name: "4", imageUrl: "https://via.placeholder.com/150?text=4" },
        { name: "5", imageUrl: "https://via.placeholder.com/150?text=5" },
        { name: "6", imageUrl: "https://via.placeholder.com/150?text=6" },
        { name: "7", imageUrl: "https://via.placeholder.com/150?text=7" },
        { name: "8", imageUrl: "https://via.placeholder.com/150?text=8" },
        { name: "9", imageUrl: "https://via.placeholder.com/150?text=9" },
        { name: "10", imageUrl: "https://via.placeholder.com/150?text=10" },
        { name: "11", imageUrl: "https://via.placeholder.com/150?text=11"},
        { name: "12", imageUrl: "https://via.placeholder.com/150?text=12" },
        ];
    
        var usedANames = [];
        var usedBNames = [];
        var matchedList = [];

        // A profil resimlerini oluştur
        var container = document.getElementById("container");
        AProfiles.forEach(function(profile) {
            var profileDiv = document.createElement("div");
            profileDiv.classList.add("profile-item");
            profileDiv.dataset.name = profile.name;
            var img = document.createElement("img");
            img.src = profile.imageUrl;
            img.alt = profile.name;
            img.classList.add("profile-image");
            img.onclick = function() {
                selectProfile(this);
            };
            profileDiv.appendChild(img);
            container.appendChild(profileDiv);
        });

        function selectProfile(element) {
            var selectedName = element.alt;
            if (!usedANames.includes(selectedName)) {
                var selectedProfileDivs = document.querySelectorAll(".profile-item[data-name='" + selectedName + "']");
                selectedProfileDivs.forEach(function(div) {
                    div.classList.toggle("selected");
                });
                usedANames.push(selectedName);

                // Find a matching profile from BProfiles
                var randomIndex = Math.floor(Math.random() * BProfiles.length);
                var matchedBProfile = BProfiles[randomIndex];
                BProfiles.splice(randomIndex, 1);
                usedBNames.push(matchedBProfile.name);

                matchedList.push(matchedBProfile.name+ " = " + selectedName);

                if (BProfiles.length === 0) {
                    document.getElementById("showMatchedListButton").style.display = "block";
                }

                // Show celebration message
                var celebrationMessage = document.getElementById("celebrationMessage");
                celebrationMessage.textContent = matchedBProfile.name  + ". kişiye " +  selectedName + " kitabını tavsiye ediyoruz!";
                document.getElementById("celebrationModal").style.display = "block";
               
            }
        }
        var buttonClicked = false; // Butona henüz tıklanmadı

        // Tüm eşleşmeleri göster
        function showMatchedList() {
            var matchedListContainer = document.getElementById("matchedList");
            matchedListContainer.innerHTML = "";
            matchedList.forEach(function(match) {
                var li = document.createElement("li");
                li.textContent = match;
                matchedListContainer.appendChild(li);
            });
            document.getElementById("matchedListContainer").style.display = "block";
            
            // Butonu gizle sadece bir kez tıklandığında
            if (!buttonClicked) {
                buttonClicked = true;
                document.getElementById("showMatchedListButton").style.display = "none";
            }
        }



        // Modal kapatma fonksiyonu
        function closeCelebrationModal() {
            document.getElementById("celebrationModal").style.display = "none";
        }
    </script>
</body>
</html>
